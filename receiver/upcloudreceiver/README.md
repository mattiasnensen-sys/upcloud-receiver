<!-- status autogenerated section -->
# UpCloud Receiver

| Status        |           |
| ------------- |-----------|
| Stability     | [alpha]: metrics |
| Distributions | custom |

[alpha]: https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/component-stability.md#alpha
<!-- end autogenerated section -->

The UpCloud receiver pulls managed service metrics from the UpCloud API and emits OpenTelemetry metrics.

## Supported resource types

- Managed Databases (`/1.3/database/{uuid}/metrics`)
- Managed Load Balancers (configurable path template, default `/1.3/load-balancer/{uuid}/metrics`)

## Configuration

```yaml
upcloud:
  collection_interval: 60s
  initial_delay: 1s
  api:
    endpoint: https://api.upcloud.com
    token: ${env:UPCLOUD_API_TOKEN}
    # Optional alternatives:
    # token_file: /var/run/secrets/upcloud/token
    # username: ${env:UPCLOUD_USERNAME}
    # password: ${env:UPCLOUD_PASSWORD}
    # password_file: /var/run/secrets/upcloud/password
    timeout: 10s
  managed_databases:
    enabled: true
    auto_discover: true
    discovery_path: /1.3/database
    discovery_limit: 100
    uuids: ["00000000-0000-0000-0000-000000000000"] # optional explicit add-ons
    exclude_uuids: ["00000000-0000-0000-0000-000000000099"] # optional
    period: 5m
    metrics: []
  managed_load_balancers:
    enabled: true
    auto_discover: true
    discovery_path: /1.3/load-balancer
    uuids: [] # optional explicit add-ons
    exclude_uuids: [] # optional
    period: 5m
    metrics: []
    metrics_path_template: /1.3/load-balancer/{uuid}/metrics
```

## Authentication

Supported authentication modes:

- Bearer token: `api.token` or `api.token_file`
- Basic auth: `api.username` + (`api.password` or `api.password_file`)

Rules:

- Bearer and basic auth are mutually exclusive.
- Inline and `_file` variants are mutually exclusive for the same secret.

## Autodiscovery

Each resource block supports:

- `auto_discover`: discover resource UUIDs from the list endpoint.
- `uuids`: explicit UUIDs to include in addition to discovered UUIDs.
- `exclude_uuids`: UUIDs to remove from the final target set.

Resolution order per scrape:

1. Start with explicit `uuids`
2. Add discovered UUIDs when `auto_discover=true`
3. Apply `exclude_uuids`

## Metric naming

Metrics are emitted as:

- `upcloud.managed_database.<domain>.<name>`
- `upcloud.managed_load_balancer.<domain>.<name>`

Examples:

- `upcloud.managed_database.cpu.utilization` (`unit=1`, normalized ratio)
- `upcloud.managed_database.disk.io.read_operations` (`unit={operation}/s`)
- `upcloud.managed_load_balancer.backend.connections` (`unit=1`)

Receiver normalization:

- `%` usage metrics are normalized from percentage values (`0..100`) to ratio (`0..1`) for `*.utilization` instruments.

Resource and datapoint attributes include:

- `cloud.provider=upcloud`
- `upcloud.resource.type`
- `upcloud.resource.uuid`
- `upcloud.metric.name`
- `upcloud.series`
